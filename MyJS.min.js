function setCookie(n,t,i){n.cookie=t+"="+i+";"}function getCookie(n){let t=n+"=",r=decodeURIComponent(document.cookie),i=r.split(";");for(let n=0;n<i.length;n++){let r=i[n];while(r.charAt(0)==" ")r=r.substring(1);if(r.indexOf(t)==0)return r.substring(t.length,r.length)}return""}function RandomName(){for(var n,t="",i=0;i<5;i++)n=Math.floor(Math.random()*62),t+=n<10?String.fromCharCode(n+48):n<36?String.fromCharCode(n+55):String.fromCharCode(n+61);return t}function printTable(n){var i=document.getElementById(n),t;i?(t=window.open("","Print-Window"),t.document.open(),t.document.write('<html><head><link rel="stylesheet" type="text/css" href="style.css"><style type="text/css"> @font-face { font-family: MyFont4; src: url("font/DroidSansArabic.ttf"); } input, label, h1, h2, h3, h4, h5, h6, button, div, body, p { font-family: MyFont4; direction: rtl; text-align: center; -moz-text-align-last: center; text-align-last: center; } table {border-collapse: collapse; width: 100%;} td, th {border: 1px solid #dddddd; text-align: left; padding: 8px;}<\/style><\/head><body onload="window.print()">'+i.outerHTML+"<\/body><\/html>"),t.document.close(),t.focus(),setTimeout(function(){t.close()},2e3)):console.error("Table with ID "+n+" not found.")}function printPageArea(n){var t=window.open("","PRINT");return t.document.write("<html><head>"),t.document.write("<style>\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n  width: 100%;\n  border: 1px solid #ddd;\n}\n\nth, td {\n  text-align: left;\n  padding: 16px;\n}\n\ntr:nth-child(even) {\n  background-color: #f2f2f2;\n}<\/style>"),t.document.write("<\/head><body >"),t.document.write(document.getElementById(n).innerHTML),t.document.write("<\/body><\/html>"),t.document.close(),t.focus(),t.print(),t.close(),!0}function ajaxLoad(n,t,i,r,u){try{$.ajax({url:n,type:"GET",dataType:"html",data:r,beforeSend:function(){t!=""&&$("#"+t).html("<div class='text-center' ><img id='imgLoading' src='/Img/loading.gif' class='rounded' style='width: 50px; ' /><\/div>")},success:function(r){t!=""&&(i&&window.history.pushState(null,"",n),$("#"+t).html(r))},complete:u,error:function(t){console.log(" Msg : "+t.message+" : Path "+n)}})}catch(f){console.log("error : "+f.name+" Msg : "+f.message)}}async function ajaxImg(n,t){try{await $.ajax({url:n,type:"GET",dataType:"text",beforeSend:function(){$("#"+t).attr("src","/Img/loadingImg.gif")},success:async function(n){t!=""&&$("#"+t).attr("src",n)},error:function(t){console.log(" Msg : "+t.message+" : Path "+n)}})}catch(i){console.log("error : "+i.name+" Msg : "+i.message+" : Path "+n)}}function AddOptionNull(n,t){$(n).ready(function(){const i=n.getElementById(t);if(i){const t=n.createElement("option");t.text="";t.value="";t.disabled=!0;t.selected=!0;i.add(t)}else console.error("Select element not found.")})}async function saveImageToCache(n,t){const i=await caches.open(n),r=new URL("/0",location.origin),u=await i.match(r);if(!u){const u=await fetch(t),f=await u.blob(),n=new Response(f,{headers:{"Content-Type":"image/png","Cache-Control":`max-age=${7776e3}`}});n.url="/0";await i.put(r,n)}}async function getImageFromCache(n){const i=await caches.open(n),r=new URL("/0",location.origin),t=await i.match(r);if(t){const i=await t.blob(),n=new Response(i,{headers:t.headers});n.url="/0";const r=await n.blob();return await convertBlobToBase64(r)}return null}function convertBlobToBase64(n){return new Promise((t,i)=>{const r=new FileReader;r.onloadend=()=>t(r.result);r.onerror=i;r.readAsDataURL(n)})}function uploadImage(){var t=tinymce.activeEditor,n=document.createElement("input");n.setAttribute("type","file");n.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon");n.addEventListener("change",()=>{if(n.files!=null&&n.files[0]!=null){let i=new FileReader;i.onload=()=>{t.insertContent(""),n.value=""};i.readAsDataURL(n.files[0])}});n.click()}function reduceBase64ImageResolution(n,t){var i=new Image;i.src=n;i.onload=function(){var r=i.width*(2/3),u=i.height*(2/3),n=document.createElement("canvas"),f,e;n.width=r;n.height=u;f=n.getContext("2d");f.drawImage(i,0,0,r,u);e=n.toDataURL("image/png",.8);t(e)}}$(document).ready(function(){for(var n,o,i,s,e,r,f,u=document.getElementsByTagName("a"),t=0;t<u.length;t++)n=u[t],n.tagName==="A"&&n.textContent.includes("Edit")&&(n.textContent="تعديل",$(n).addClass("btn"),$(n).css({"background-color":"#2A1350",color:"white",cursor:"pointer"})),n.tagName==="A"&&n.textContent.includes("Details")&&(n.textContent="تفاصيل",$(n).addClass("btn"),$(n).css({"background-color":"#2A1350",color:"white",cursor:"pointer"})),n.tagName==="A"&&n.textContent.includes("Create")&&(n.textContent="جديد",$(n).addClass("btn btn-primary"),$(n).css("cursor","pointer")),n.tagName==="A"&&n.textContent.includes("Delete")&&(n.textContent="حذف",$(n).addClass("btn btn-danger"),$(n).css("cursor","pointer")),n.tagName==="A"&&n.textContent.includes("Back to List")&&(n.textContent="العودة الى القائمة",$(n).addClass("btn"),$(n).css({"background-color":"#2A1350",color:"white",cursor:"pointer"}));for(u=document.querySelectorAll('input[type="submit"]'),t=0;t<u.length;t++)n=u[t],n.tagName==="INPUT"&&n.value.includes("Edit")&&(n.value="تعديل",$(n).addClass("btn btn-secondary my-1"),$(n).css("cursor","pointer")),n.tagName==="INPUT"&&n.value.includes("Save")&&(n.value="حفظ",$(n).addClass("btn btn-primary my-1"),$(n).css("cursor","pointer")),n.tagName==="INPUT"&&n.value.includes("Details")&&(n.value="تفاصيل",$(n).addClass("btn btn-secondary my-1"),$(n).css("cursor","pointer")),n.tagName==="INPUT"&&n.value.includes("Create")&&(n=u[t],n.value="حفظ",$(n).addClass("btn btn-primary my-1"),$(n).css("cursor","pointer")),n.tagName==="INPUT"&&n.value.includes("Delete")&&(n.value="حذف",$(n).addClass("btn btn-danger my-1"),$(n).css("cursor","pointer"));for(u=document.querySelectorAll("h3"),t=0;t<u.length;t++)n=u[t],n.tagName==="H3"&&n.textContent.includes("Are you sure you want to delete this?")&&(n.textContent="هل تريد حذف السجل المحدد ؟",$(n).css("color","red"));for(o=document.getElementsByTagName("table"),t=0;t<o.length;t++)if(i=o[t],s=RandomName(),i.tagName==="TABLE"){i.name="tbl_"+s;i.id="tbl_"+s;e=document.createElement("div");$(e).addClass("container text-center row py-1");r=document.createElement("input");r.type="text";r.id="txtSearch_"+i.id;r.setAttribute("placeholder","بحث في الجدول");$(r).addClass("form-control text-center col");$(r).css({color:"royalblue"});$(r).on("keyup",function(){var n=$(this).val().toLowerCase();$("#"+i.id+" tr").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(n)>-1)})});f=document.createElement("button");f.id="btnPrint_"+i.id;f.data="hi";f.innerHTML="طباعة";$(f).addClass("btn btn-secondary col-3");f.onclick=function(){$(r).hide();$(f).hide();$("#"+i.id+" th:last-child, #"+i.id+" td:last-child").hide();printTable(i.id);$("#"+i.id+" th:last-child, #"+i.id+" td:last-child").show();$(r).show();$(f).show()};e.insertBefore(r,e.children[0]);e.insertBefore(f,e.children[0]);i.insertBefore(e,i.children[0])}$("table").addClass("table table-hover");$("th").css("color","royalblue");tinymce.init({selector:"#Content",plugins:"image code",language:"ar",image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:function(n){var t=document.createElement("input");t.setAttribute("type","file");t.setAttribute("accept","image/*");t.onchange=function(){var t=this.files[0],i=new FileReader;i.onload=function(){var f="blobid"+(new Date).getTime(),r=tinymce.activeEditor.editorUpload.blobCache,e=i.result.split(",")[1],u=r.create(f,t,e);r.add(u);n(u.blobUri(),{title:t.name})};i.readAsDataURL(t)};t.click()},content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"})});